function Search(){var n=$("#place-field").val();$.post("/search/search",{q:n},function(n){var f=$("#result-places").html(""),u=$("#place-hidden").attr("data-host"),r=[],t,i;if(u.indexOf("mowido.se")>=0)for(t=0;t<n.length;t++)i={value:n[t].Document.ID,label:n[t].Document.NameSV},r.push(i);else for(t=0;t<n.length;t++)i={value:n[t].Document.ID,label:n[t].Document.NameSV},r.push(i);$("#place-field").autocomplete({minLength:0,source:r,focus:function(n,t){return $("#place-field").val(t.item.label),!1},select:function(n,t){return $("#q").val(t.item.label),$("#place-hidden").val(t.item.value),SearchPlace(t.item.value),!1},open:function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&$(".ui-autocomplete").off("menufocus hover mouseover mousemove")}}).autocomplete("instance")._renderItem=function(n,t){return $("<li>").append("<div>"+t.label+"<\/div>").appendTo(n)}})}function SearchPlace(n,t){var i=!0,r;n.length>0&&(r="http://"+$("#place-hidden").attr("data-host")+"/"+$("#place-hidden").attr("data-startslug")+"/"+n+"/placeslug",i=!1,window.location.href=r);t.length>0&&i&&$.post("/search/search",{q:t},function(n){var t="http://"+$("#place-hidden").attr("data-host")+"/";n[0]&&(t+=$("#place-hidden").attr("data-startslug")+"/"+n[0].Document.ID+"/placeslug");window.location.href=t})}function sortSearch(n){$.post("/search/sortsearch",{q:n,filter:$("#filter-hidden").val(),id:$("#place-hidden").val(),slug:$("#place-field").val(),startslug:$("#place-hidden").attr("data-startslug")},function(n){n&&(window.location.href=n)})}function ddFilterChange(){var n,r=$("#filter-hidden"),t=$("#ddPriceMin").val(),i=$("#ddPriceMax").val();t&&i&&(n=t+"_"+i);console.log(n);r.val(n)}$(function(){$("#place-field").keyup(function(n){Search();n.keyCode==13&&SearchPlace($("#place-hidden").val(),$("#place-field").val());$("#place-hidden").val("")});var n=$("#sort-hidden").val();n&&n.length>0&&$("#ddSort").val(n)});$(document).ready(function(){$(".btn-search").click(function(){var n=$("#place-hidden").val(),t=$("#place-field").val();SearchPlace(n,t)})});